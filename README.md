# autoAnnotation

## 此部分为 “动态剪贴画”计划的实现尝试

使用ae抠出小人的绿幕素材，此素材遍历不同摄像机下的小人的所有基本动作，作为“剪下来的动态图画”。将这些素材与背景地图相合成。合成方式由算法得出。

进阶操作：绿幕素材可包含常见特效，例如体香的蓝盾等各种光污染；合成方式不局限于小人普通地合成在地图上，可包含多个小人的多种互相遮挡等。

---

### 操作指南

1. 在test.py中按样例修改
2. 角色视频分辨率要求统一，时长为150秒内，内容为小人加绿幕，可使用ae与clipchamp制作。
3. 背景视频，时长为150秒内，内容为空的地图背景，可使用ae制作。
4. 运行test.py，在outputs目录中可查看生成的数据集

---

### v0.1.0

注意：目前生成的数据集质量并不尽人意，约为同数量人工数据集准确率的40%-50%，且很大程度上依赖绿幕素材的质量，但是已找到相关解决策略，预计将在近期进行版本更新

已实现：

1. 视频分割图片
2. 角色图片处理
   1. 去绿幕
   2. 缩放
3. 角色图片与背景图片的简单合成
   1. 随机坐标生成
   2. 多角色合成
4. 数据集生成

待实现：

1. 实现角色图片随机合成顺序
2. 用json存储永久数据，包含路径、标注范围等
3. 再分解角色类，设计“动作”类，动作类为角色类的依赖
4. 优化补足图片数量逻辑
5. 替换以frame_xxxxx.png的命名方式, 用随机字符串代替
6. 优化线程和运行速度
7. 再细分地图标注范围（例如敌我站位应有明显右左之分）
8. 支持与角色关联度较低的特效合成到背景

~~1. 去绿幕算法改进~~

~~2. 生成yolov8标注文件~~

~~3. 随机坐标生成算法改进~~

---

### v0.0.1

已实现：

1. 视频分割图片
2. 前景图片处理
   1. 去绿幕
   2. 缩放
3. 前景图片与背景图片的简单合成
   1. 随机坐标生成

待实现：

1. 去绿幕算法改进
2. 生成yolov8标注文件
3. 线程优化，运行速度优化
4. 支持更长视频
5. 自定义分割帧数
6. 随机坐标生成算法改进
7. 支持多个前景（更多学生、光效、血条、掩体等）合成到背景
